# 🔁 TEST_REGRESSION.md

## 概要

このドキュメントでは、退行テスト（Regression Test）の設計方針と運用戦略についてまとめます。  
機能追加やリファクタリングの際に **既存の機能が壊れていないことを検証する** ことを目的とします。

---

## ✅ 退行テストの目的

- 機能変更によるバグの早期発見
- テスト自動化による品質担保と開発効率化
- チーム開発における安心感の提供

---

## 🔍 対象範囲と優先順位

| 項目                         | 優先度 | 理由                                             |
|------------------------------|--------|--------------------------------------------------|
| 認証・認可機能               | 高     | セキュリティ上の要                         |
| 管理画面のCRUD操作           | 高     | 業務ロジックに直結                             |
| 表示UIの条件分岐（例：adminのみ表示） | 中     | 誤表示の防止                                     |
| レポート機能や一覧系         | 低     | 非常時でも致命的でない                          |

---

## 🧪 テスト方法と戦略

| 種類         | 方法                                                                 |
|--------------|----------------------------------------------------------------------|
| ユニットテスト | 関数・バリデーション処理の変更に対して、既存関数群の再検証           |
| 結合テスト     | APIのレスポンス構造変更時に、全APIとの整合性を確認                    |
| E2Eテスト      | UIのボタン・表示・ページ遷移などが崩れていないかをシナリオで確認      |

---

## 🚨 テスト失敗時の対応ルール

1. **意図した仕様変更**の場合：  
   → テストケースを更新し、PRで変更理由を明記

2. **想定外のバグ**の場合：  
   → 該当コードを修正し、再度全テストを実行

---

## 🛠️ 運用の工夫

- GitHub Actions による PR 時自動実行
- `@vitest/coverage` による影響範囲の可視化
- Playwright による画面差分の自動比較（スナップショットリグレッション）

---

## 📦 今後の改善候補

- テストケース管理ツールの導入（Notion / Xray など）
- カバレッジベースの優先度設定（重要関数のみ重点管理）
- Slack通知等でのテスト失敗アラート

